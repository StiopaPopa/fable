import { ALogger } from "./alogger.js";
import {
  LogLevel
} from "./api.js";
import { expandArgsJSON } from "./utils.js";
class StreamLogger extends ALogger {
  constructor(target, id, level, parent) {
    super(id, level, parent);
    this.target = target;
  }
  childLogger(id, level) {
    return new StreamLogger(this.target, id, level ?? this.level, this);
  }
  logEntry(e) {
    if (e[0] < this.level) return;
    this.target.write(
      `[${LogLevel[e[0]]}] ${e[1]}: ${expandArgsJSON(e.slice(3))}
`
    );
    this.parent?.logEntry(e);
  }
}
export {
  StreamLogger
};
